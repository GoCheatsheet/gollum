.. Autogenerated by Gollum RST generator (docs/generator/*.go)

AwsS3
=====

This producer sends messages to Amazon S3.
Each "file" use a configurable batch and sends the content by a multipart upload to s3.
This principle avoid temporary storage on disk.

Please keep in mind that Amazon S3 do not support appending to existing objects. Because of that a rotation is
mandatory in this producer.




Parameters
----------

**Bucket**

  Your S3 bucket where you want to upload.
  
  

**File** (default: gollum_*.log)

  This value is used as a base file pattern for you final file names.
  The " * " will parsed to the active stream name.
  By default this parameter is set to "gollum_*.log"
  
  

Parameters (from components.BatchedWriterConfig)
------------------------------------------------

**Batch/FlushCount** (default: 4096)

  This value defines the number of messages to be buffered before they are
  written to disk. This setting is clamped to "BatchMaxCount".
  By default this parameter is set to "`BatchMaxCount` / 2".
  
  

**Batch/FlushTimeoutSec** (default: 0, unit: sec)

  This value defines the maximum number of seconds to wait before
  a flush is aborted during shutdown. Set this parameter to "0" which does not abort
  the flushing procedure.
  By default this parameter is set to "0".
  
  

**Batch/MaxCount** (default: 8192)

  This value defines the maximum number of messages that can be buffered
  before a flush is mandatory. If the buffer is full and a flush is still
  underway or cannot be triggered out of other reasons, the producer will block.
  By default this parameter is set to "8192".
  
  

**Batch/TimeoutSec** (default: 5, unit: sec)

  This value defines the maximum number of seconds to wait after the last
  message arrived before a batch is flushed automatically.
  By default this parameter is set to "5".
  
  

Parameters (from DirectProducer)
--------------------------------

**Enable**

  switches the consumer on or off. By default this value is set to true.
  
  

**FallbackStream**

  defines the stream used for messages that are sent to the fallback after
  a timeout (see ChannelTimeoutMs). By default this is _DROPPED_.
  
  

**ID**

  allows this producer to be found by other plugins by name. By default this
  is set to "" which does not register this producer.
  
  

**Modulators**

  sets formatter and filter to use. Each formatter has its own set of options
  which can be set here, too. By default this is set to format.Forward.
  Each producer decides if and when to use a Formatter.
  
  

**ShutdownTimeoutMs**

  sets a timeout in milliseconds that will be used to detect
  a blocking producer during shutdown. By default this is set to 1 second.
  Decreasing this value may lead to lost messages during shutdown. Increasing
  this value will increase shutdown time.
  
  

**Streams**

  contains either a single string or a list of strings defining the
  message channels this producer will consume. By default this is set to "*"
  which means "listen to all routers but the internal".
  
  

Parameters (from components.RotateConfig)
-----------------------------------------

**Rotation/At**

  This value defines a specific time for rotation in hh:mm format.
  By default this parameter is set to "".
  
  

**Rotation/AtHour** (default: -1)

  (no documentation available)
  

**Rotation/AtMin** (default: -1)

  (no documentation available)
  

**Rotation/Compress** (default: false)

  This value defines if a rotated logfile is to be gzip compressed or not.
  By default this parameter is set to "false".
  
  

**Rotation/Enable** (default: false)

  If this value is set to "true" the logs will rotate after reaching certain thresholds.
  By default this parameter is set to "false".
  
  

**Rotation/SizeMB** (default: 1024, unit: mb)

  This value defines the maximum file size in MB that triggers a file rotate.
  Files can get bigger than this size.
  By default this parameter is set to "1024".
  
  

**Rotation/TimeoutMin** (default: 1440, unit: min)

  This value defines a timeout in minutes that will cause the logs to
  rotate. Can be set in parallel with RotateSizeMB.
  By default this parameter is set to "1440".
  
  

**Rotation/Timestamp** (default: 2006-01-02_15)

  This value sets the timestamp added to the filename when file rotation
  is enabled. The format is based on Go's time.Format function.
  By default this parameter is to to "2006-01-02_15".
  
  

**Rotation/ZeroPadding** (default: 0)

  This value sets the number of leading zeros when rotating files with
  an existing name. Setting this setting to 0 won't add zeros, every other
  number defines the number of leading zeros to be used.
  By default this parameter is set to "0".
  
  

Parameters (from components.AwsMultiClient)
-------------------------------------------

**Endpoint**

  This value defines the used aws api endpoint. If no endpoint is set
  the client needs to set the right endpoint for the used region.
  By default this is set to "".
  
  

**Region** (default: us-east-1)

  This value defines the used aws region.
  By default this is set to "us-east-1"
  
  

Parameters (from components.AwsCredentials)
-------------------------------------------

**Credential/AssumeRole**

  This value is used to assume an IAM role using. By default this is set to "".
  
  

**Credential/File**

  is used for "shared" type and is used as the path to your
  shared Credentials file (~/.aws/credentials)
  
  

**Credential/Id**

  is used for "static" type and is used as the AccessKeyID
  
  

**Credential/Profile** (default: default)

  is used for "shared" type and is used for the profile
  
  

**Credential/Secret**

  is used for "static" type and is used as the SecretAccessKey
  
  

**Credential/Token**

  is used for "static" type and is used as the SessionToken
  
  

**Credential/Type** (default: none)

  This value defines the credentials that are to be used when
  connecting to aws. This can be one of the following:
  
  * environment: Retrieves credentials from the environment variables of the running process
  
  * static: Retrieves credentials value for individual credential fields
  
  * shared: Retrieves credentials from the current user's home directory
  
  * none: Use a anonymous login to aws
  See https://docs.aws.amazon.com/sdk-for-go/api/aws/credentials/#Credentials for more information.
  By default this parameter is set to "none".
  
  

Examples
--------

.. code-block:: yaml

	This example will send all received message from all stream to S3
	and create a own file for each stream:
	
	 S3Out:
	   Type: producer.AwsS3
	   Credential:
	     Type: shared
	     File: /Users/<USERNAME>/.aws/credentials
	     Profile: default
	   Region: eu-west-1
	   Bucket: gollum-s3-test
	   Streams:
	     - "*"
	   Batch:
	     TimeoutSec: 60
	     MaxCount: 1000
	     FlushCount: 500
	     FlushTimeoutSec: 0
	   Rotation:
	     Timestamp: 2006-01-02T15:04:05.999999999Z07:00
	     TimeoutMin: 1
	     SizeMB: 20
	   Modulators:
	     - format.Envelope:
	       Postfix: "\n"
	
	


